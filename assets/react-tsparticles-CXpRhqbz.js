import{r as y,t as f}from"./react-DUmIWLMH.js";import{t as c}from"./tsparticles-engine-iXPTmHw2.js";const p=e=>typeof e=="object"&&e!==null;function l(e,t,s=()=>!1){if(!p(e)||!p(t))return e===t;const r=Object.keys(e).filter(i=>!s(i)),a=Object.keys(t).filter(i=>!s(i));if(r.length!==a.length)return!1;for(const i of r){const n=e[i],o=t[i];if(p(n)&&p(o)){if(n===t&&o===e)continue;if(!l(n,o,s))return!1}else if(Array.isArray(n)&&Array.isArray(o)){if(!d(n,o,s))return!1}else if(n!==o)return!1}return!0}function d(e,t,s){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){const a=e[r],i=t[r];if(Array.isArray(a)&&Array.isArray(i)){if(!d(a,i,s))return!1}else if(p(a)&&p(i)){if(!l(a,i,s))return!1}else if(a!==i)return!1}return!0}const u="tsparticles";class h extends y.Component{constructor(t){super(t),this.state={init:!1,library:void 0}}destroy(){this.state.library&&(this.state.library.destroy(),this.setState({library:void 0}))}shouldComponentUpdate(t){const s=t.options??t.params,r=this.props.options??this.props.params;return t.url!==this.props.url||t.id!==this.props.id||t.canvasClassName!==this.props.canvasClassName||t.className!==this.props.className||t.height!==this.props.height||t.width!==this.props.width||!l(t.style,this.props.style)||t.init!==this.props.init||t.loaded!==this.props.loaded||!l(s,r,a=>a.startsWith("_"))}componentDidUpdate(){this.refresh()}forceUpdate(){this.refresh().then(()=>{super.forceUpdate()})}componentDidMount(){(async()=>(this.props.init&&await this.props.init(c),this.setState({init:!0},async()=>{await this.loadParticles()})))()}componentWillUnmount(){this.destroy()}render(){const{width:t,height:s,className:r,canvasClassName:a,id:i}=this.props;return f.createElement("div",{className:r,id:i},f.createElement("canvas",{className:a,style:{...this.props.style,width:t,height:s}}))}async refresh(){this.destroy(),await this.loadParticles()}async loadParticles(){if(!this.state.init)return;const t=this.props.id??h.defaultProps.id??u,s=await c.load({url:this.props.url,id:t,options:this.props.options??this.props.params});this.props.container&&(this.props.container.current=s),this.setState({library:s}),this.props.loaded&&await this.props.loaded(s)}}h.defaultProps={width:"100%",height:"100%",options:{},style:{},url:void 0,id:u};export{h as P};
